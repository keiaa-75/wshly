<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head}"></head>
<body class="bg-gradient-to-br from-pink-50 to-red-50 min-h-screen font-aux-dotbitc">
    
    <div class="relative min-h-screen overflow-hidden">
        
        <!-- Card Preview - Full screen, always centered -->
        <div class="absolute inset-0 md:left-80 flex items-center justify-center p-4 transition-all duration-300" id="preview-area">
            <div class="w-full max-w-sm">
                <h2 class="font-superhelio text-2xl text-center text-red-600 mb-4 font-bold">PREVIEW</h2>
                <div th:replace="~{fragments/card-display :: card}"></div>
            </div>
        </div>
        
        <!-- Settings Form - Slides in from bottom (mobile) / left (desktop) -->
        <div id="form-pane" class="fixed bottom-0 left-0 md:top-0 w-full md:w-80 p-4 bg-white border-t-2 md:border-t-0 md:border-r-2 border-pink-200 transition-transform duration-300 ease-in-out z-20">
            <div th:replace="~{fragments/form-toggle :: toggle}"></div>
            <div th:replace="~{fragments/card-form :: form(${messages})}"></div>
        </div>
        
    </div>
    
    <script src="/js/card-creator.js"></script>
    
    <script>
        // Form pane toggle functionality
        $(document).ready(function() {
            const $formPane = $('#form-pane');
            const $toggleIcon = $('#toggle-icon');
            const $previewArea = $('#preview-area');
            let isCollapsed = false;
            
            const formHeight = $formPane.outerHeight();
            const isMobile = () => $(window).width() < 768;
            
            $('#form-toggle').click(function() {
                isCollapsed = !isCollapsed;
                
                if (isCollapsed) {
                    $formPane.addClass('translate-y-full md:translate-y-0 md:-translate-x-full');
                    $toggleIcon.addClass('rotate-180').removeClass('md:rotate-90').addClass('md:-rotate-90');
                    $previewArea.removeClass('md:left-80').addClass('md:left-0');
                    if (isMobile()) {
                        $previewArea.css('bottom', '0');
                    }
                } else {
                    $formPane.removeClass('translate-y-full md:translate-y-0 md:-translate-x-full');
                    $toggleIcon.removeClass('rotate-180 md:-rotate-90').addClass('md:rotate-90');
                    $previewArea.removeClass('md:left-0').addClass('md:left-80');
                    if (isMobile()) {
                        $previewArea.css('bottom', formHeight + 'px');
                    }
                }
            });
            
            if (isMobile()) {
                $previewArea.css('bottom', formHeight + 'px');
            }
        });
    </script>
</body>
</html>
